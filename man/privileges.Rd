% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/privileges.R
\name{privileges}
\alias{privileges}
\alias{user}
\alias{on}
\alias{grant}
\alias{translate_privilege}
\title{As s3 privilege}
\usage{
user(name)

on(.data, table, ...)

grant(.data, command)

translate_privilege(priv, con)
}
\arguments{
\item{name}{(character) a user (role) name}

\item{.data}{an s3 object of class \code{privilege}}

\item{table}{a table name}

\item{...}{column names, 0 or more}

\item{command}{one of all, select, update, insert, delete}

\item{priv}{an s3 object of class \code{privilege}, required}

\item{con}{DBI connection object, required}
}
\description{
As s3 privilege

User

On

Grant

Grant
}
\examples{
user(jane)
user(jane) |> on(fruits, apples)
user(jane) |> on(fruits, apples, bananas, pears)
user(jane) |> on(fruits, apples) |> grant(select)
\dontshow{if (interactive() && rlang::is_installed("dbplyr")) (if (getRversion() >= "3.4") withAutoprint else force)(\{ # examplesIf}
library(tibble)
library(RPostgres)
library(DBI)
con <- dbConnect(Postgres())

dat <- tibble(
  apples = c("pink lady", "cortland", "mcintosh"),
  strawberries = c("alice", "albion", "alaska pioneer")
)
DBI::dbWriteTable(con, "fruits", dat)
dbExecute(con, "CREATE ROLE jane")

# GRANT SELECT
#  (apples, strawberries)
#  ON fruits
#  TO jane
sql <- user(jane) |>
  on(fruits, apples, strawberries) |>
  grant(select) |>
  translate_privilege(con)
dbExecute(con, sql)
# can't pipe into dbExecute for some reason
# could in theory include dbExecute in translate_privilege?
\dontshow{\}) # examplesIf}
}
