% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/create.R
\name{rls_create_policy}
\alias{rls_create_policy}
\title{Create a row level security policy}
\usage{
rls_create_policy(con, policy)
}
\arguments{
\item{con}{a DBI database connection object}

\item{policy}{(list) a policy derived from \code{\link[=rls_construct_policy]{rls_construct_policy()}}}
}
\value{
a scalar numeric that specifies the number of rows affected
by the statement, invisibly
}
\description{
Create a row level security policy
}
\examples{
\dontshow{if (interactive() && has_postgres()) (if (getRversion() >= "3.4") withAutoprint else force)(\{ # examplesIf}
library(DBI)
library(RPostgres)
con <- dbConnect(Postgres())

dbCreateTable(con, "sometable", mtcars)

policy1 <- rls_construct_policy(
  name = "hide_confidential",
  on = "sometable",
  using = "(true)"
)
policy1
rls_create_policy(con, policy1)
rls_policies(con)

policy2 <- rls_construct_policy(
  name = "policy_concerts",
  on = "sometable",
  for_ = "SELECT",
  using = "(true)"
)
policy2
rls_create_policy(con, policy2)
rls_policies(con)

# cleanup
rls_drop_policy(con, policy1)
rls_drop_policy(con, policy2)
dbDisconnect(con)
\dontshow{\}) # examplesIf}
}
